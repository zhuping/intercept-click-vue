{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["const captureContexts = []\nconst eventTypes = ['click']\n\nconst Intercept = {\n  debounce(fn, delay) {\n    let timer\n\n    return function () {\n      const context = this\n      const args = arguments\n\n      if (timer) {\n        clearTimeout(timer)\n        args[0].stopImmediatePropagation();\n      }\n\n      timer = setTimeout(function () {\n        fn.apply(context, args)\n        timer = null\n      }, delay)\n    }\n  },\n  delegateBehavior (context, cb) {\n    if (context.$el && context.$el.nodeType !== 8) {\n      context.$el.setAttribute('vue-component-uid', context._uid)\n    }\n\n    if (context.$root.$el && !context.$root.$el._isBindDelegate) {\n      eventTypes.forEach(eventType => {\n        context.$root.$el.addEventListener(eventType, this.debounce(e => {\n          this.captureEvent(e, captureContexts, eventType, cb)\n        }, 250), true)\n      })\n      context.$root.$el._isBindDelegate = true\n    }\n  },\n  captureEvent (e, contexts, eventType, cb) {\n    const els = contexts.map(context => context.$el)\n    let currentEl = e.target\n    while (currentEl) {\n      const index = els.indexOf(currentEl)\n      if (index > -1) {\n        cb && cb(e, contexts, index, eventType)\n        break\n      }\n      currentEl = currentEl.parentNode\n    }\n  }\n}\n\nexport default {\n  install (Vue, fn) {\n    Vue.mixin({\n      mounted () {\n        this.$nextTick(() => {\n          captureContexts.push(this)\n          Intercept.delegateBehavior(this, fn)\n        })\n      }\n    })\n  }\n}\n"],"names":["captureContexts","eventTypes","Intercept","debounce","fn","delay","timer","context","args","arguments","clearTimeout","stopImmediatePropagation","setTimeout","apply","delegateBehavior","cb","$el","nodeType","setAttribute","_uid","$root","_isBindDelegate","forEach","eventType","addEventListener","e","captureEvent","contexts","els","map","currentEl","target","index","indexOf","parentNode","install","Vue","mixin","mounted","$nextTick","push"],"mappings":";;;;;AAAA,IAAMA,eAAe,GAAG,EAAxB;AACA,IAAMC,UAAU,GAAG,CAAC,OAAD,CAAnB;AAEA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,QADgB,oBACPC,EADO,EACHC,KADG,EACI;AAClB,QAAIC,KAAJ;AAEA,WAAO,YAAY;AACjB,UAAMC,OAAO,GAAG,IAAhB;AACA,UAAMC,IAAI,GAAGC,SAAb;;AAEA,UAAIH,KAAJ,EAAW;AACTI,QAAAA,YAAY,CAACJ,KAAD,CAAZ;AACAE,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQG,wBAAR;AACD;;AAEDL,MAAAA,KAAK,GAAGM,UAAU,CAAC,YAAY;AAC7BR,QAAAA,EAAE,CAACS,KAAH,CAASN,OAAT,EAAkBC,IAAlB;AACAF,QAAAA,KAAK,GAAG,IAAR;AACD,OAHiB,EAGfD,KAHe,CAAlB;AAID,KAbD;AAcD,GAlBe;AAmBhBS,EAAAA,gBAnBgB,4BAmBEP,OAnBF,EAmBWQ,EAnBX,EAmBe;AAAA;;AAC7B,QAAIR,OAAO,CAACS,GAAR,IAAeT,OAAO,CAACS,GAAR,CAAYC,QAAZ,KAAyB,CAA5C,EAA+C;AAC7CV,MAAAA,OAAO,CAACS,GAAR,CAAYE,YAAZ,CAAyB,mBAAzB,EAA8CX,OAAO,CAACY,IAAtD;AACD;;AAED,QAAIZ,OAAO,CAACa,KAAR,CAAcJ,GAAd,IAAqB,CAACT,OAAO,CAACa,KAAR,CAAcJ,GAAd,CAAkBK,eAA5C,EAA6D;AAC3DpB,MAAAA,UAAU,CAACqB,OAAX,CAAmB,UAAAC,SAAS,EAAI;AAC9BhB,QAAAA,OAAO,CAACa,KAAR,CAAcJ,GAAd,CAAkBQ,gBAAlB,CAAmCD,SAAnC,EAA8C,KAAI,CAACpB,QAAL,CAAc,UAAAsB,CAAC,EAAI;AAC/D,UAAA,KAAI,CAACC,YAAL,CAAkBD,CAAlB,EAAqBzB,eAArB,EAAsCuB,SAAtC,EAAiDR,EAAjD;AACD,SAF6C,EAE3C,GAF2C,CAA9C,EAES,IAFT;AAGD,OAJD;AAKAR,MAAAA,OAAO,CAACa,KAAR,CAAcJ,GAAd,CAAkBK,eAAlB,GAAoC,IAApC;AACD;AACF,GAhCe;AAiChBK,EAAAA,YAjCgB,wBAiCFD,CAjCE,EAiCCE,QAjCD,EAiCWJ,SAjCX,EAiCsBR,EAjCtB,EAiC0B;AACxC,QAAMa,GAAG,GAAGD,QAAQ,CAACE,GAAT,CAAa,UAAAtB,OAAO;AAAA,aAAIA,OAAO,CAACS,GAAZ;AAAA,KAApB,CAAZ;AACA,QAAIc,SAAS,GAAGL,CAAC,CAACM,MAAlB;;AACA,WAAOD,SAAP,EAAkB;AAChB,UAAME,KAAK,GAAGJ,GAAG,CAACK,OAAJ,CAAYH,SAAZ,CAAd;;AACA,UAAIE,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdjB,QAAAA,EAAE,IAAIA,EAAE,CAACU,CAAD,EAAIE,QAAJ,EAAcK,KAAd,EAAqBT,SAArB,CAAR;AACA;AACD;;AACDO,MAAAA,SAAS,GAAGA,SAAS,CAACI,UAAtB;AACD;AACF;AA5Ce,CAAlB;AA+CA,YAAe;AACbC,EAAAA,OADa,mBACJC,GADI,EACChC,EADD,EACK;AAChBgC,IAAAA,GAAG,CAACC,KAAJ,CAAU;AACRC,MAAAA,OADQ,qBACG;AAAA;;AACT,aAAKC,SAAL,CAAe,YAAM;AACnBvC,UAAAA,eAAe,CAACwC,IAAhB,CAAqB,MAArB;AACAtC,UAAAA,SAAS,CAACY,gBAAV,CAA2B,MAA3B,EAAiCV,EAAjC;AACD,SAHD;AAID;AANO,KAAV;AAQD;AAVY,CAAf;;;;"}